pipeline{

      agent any
        tools {
     jdk 'JAVA_HOME'
     maven 'M2_HOME'
     
  }
  environment {

         DOCKERHUB_CREDENTIALS = credentials('dockerhub')}
     
        
        stages{

            
	    
	     stage('Docker login') {

                                         steps {
					 script{
                                          sh 'echo "login Docker ...."'
                   	sh 'docker login -u $DOCKERHUB_CREDENTIALS_USR -p $DOCKERHUB_CREDENTIALS_PSW'
                               }  }}
		
        }
	post {
                success {
                     mail to: "chiheb.najei@esprit.tn",
                            subject: "Build sucess",
                            body: "sucess"
                    echo 'successful'
                }
                failure {
                     mail to: "chiheb.najei@esprit.tn",
                            subject: "Build failed",
                            body: "failed"
                    echo 'failed'
                }
              }
}


